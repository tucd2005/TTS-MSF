<div class="lich-hoc">
  <h1 class="font-baloo">LỊCH HỌC</h1>

  <div class="schedule-container">
    <div class="schedule-table">
      <!-- Header -->
      <div class="header"></div>
      <div class="header day" *ngFor="let day of days">
        <p>{{ day }}</p>
      </div>

      <!-- Rows động từ timeSlots -->
      <ng-container *ngFor="let slot of timeSlots; let slotIndex = index">
        <!-- Time box -->
        <div class="time-box">
          <div>{{ slot.time }}</div>
          <div>{{ slot.date }}</div>
        </div>

        <!-- Cells cho 5 ngày -->
        <div
          class="cell"
          *ngFor="let mission of slot.missions; let missionIndex = index"
          [ngClass]="{ bold: mission.text }"
          (click)="
            !isEditing(slotIndex, missionIndex) && startEdit(slotIndex, missionIndex, mission.text)
          "
        >
          <span class="dot" [class]="'dot ' + getDotClass(mission.dot)"></span>

          <!-- Display mode -->
          <span *ngIf="!isEditing(slotIndex, missionIndex)" class="cell-text">
            {{ mission.text || 'Thêm chủ đề' }}
          </span>

          <!-- Edit mode: input -->
          <input
            *ngIf="isEditing(slotIndex, missionIndex)"
            [(ngModel)]="editText"
            (blur)="saveEdit(slotIndex, missionIndex)"
            (keydown.enter)="saveEdit(slotIndex, missionIndex)"
            (keydown.escape)="cancelEdit()"
            class="edit-input"
            autofocus
          />
        </div>
      </ng-container>
    </div>

    <!-- Pagination -->
    <div class="pagination">
      <button><i class="fa-solid fa-angles-left"></i></button>
      <button class="active">Trước tiếp</button>
      <button><i class="fa-solid fa-angles-right"></i></button>
    </div>
  </div>
</div>
